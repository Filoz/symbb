{% trans_default_domain "symbb_frontend" %}

{% macro createCard(object) %}

    <div class="symbb_category">
        <a href="{{ path('symbb_forum_show', {'id': object.getId(), 'name': object.getSeoName()}) }}">
            <div class="title">{{object.getName()}}</div>
            <div class="description">{{object.getDescription()}}</div>
        </a>
        <div class="infos">
            {% if object.hasShowSubForumList() %}
                <div class="subheader">{% trans %}subforums{% endtrans %}</div>
                {% for child in object.getChildren() %}
                <a href="{{ path('symbb_forum_show', {'id': child.getId(), 'name': child.getSeoName()}) }}">
                    <span class="badge">{{child.getName()}}</span> 
                </a>
                {% else %}
                    {% trans %}no subforums{% endtrans %}
                {% endfor %}
            {% endif %}
            <div class="subheader">{% trans %}Infos{% endtrans %}</div>
            {% trans %}Topics{% endtrans %} <span class="badge">{{object.getTopicCount()}}</span> &nbsp;
            {% trans %}Posts{% endtrans %} <span class="badge">{{object.getPostCount()}}</span>
            {% if checkSymbbForForumNewFlag(object) %}
                <span class="label label-success">{% trans %}new{% endtrans %}</span>
            {% endif %}
            <div class="subheader">{% trans %}Last post{% endtrans %}</div>
            <div class="lastpost">
                {% if object.getLastPost() %}
                    <a href="{{ path('symbb_forum_topic_show', {'id': object.getLastPost().getTopic().getId(), 'name': object.getLastPost().getTopic().getSeoName()}) }}?page=last#{{object.getLastPost().getSeoName()}}-{{object.getLastPost().getId()}}">
                        <div class="name">{{object.getLastPost().getName()}}</div>
                        <div class="user">{% trans with {'%user%': object.getLastPost().getAuthor().getUsername(), '%date%': object.getLastPost().getChanged()|format_date, '%time%': object.getLastPost().getChanged()|date('H:i')} %}by %user% on %date% at %time%{% endtrans %}</div>
                    </a>
                {% else %}
                    {% trans %}no Topics{% endtrans %}
                {% endif %}
            </div>
        </div>
    </div>

{% endmacro %}


{% macro createTopicCard(object) %}

    <div class="symbb_category">
        <a href="{{ path('symbb_forum_topic_show', {'id': object.getId(), 'name': object.getSeoName()}) }}">
            <div class="title">{{object.getName()}}</div>
            <div class="description">{% trans with {'%user%': object.getAuthor().getUsername(), '%date%': object.getCreated().format('D d.M Y'), '%time%': object.getCreated().format('H:i')} %}by %user% on %date% at %time%{% endtrans %}</div>
            
        </a>
        <div class="infos">
            <div class="subheader">{% trans %}Infos{% endtrans %}</div>
            <div class="labels">
            {% if app.user and app.user.getId() == object.getAuthor().getId() %}
                <span class="label label-default">{% trans %}author{% endtrans %}</span>
            {% endif %}
            {% if checkSymbbForTopicAnsweredFlag(object) %}
                <span class="label label-info">{% trans %}answered{% endtrans %}</span>
            {% endif %}
            {% if checkSymbbForTopicNewFlag(object) %}
                <span class="label label-success">{% trans %}new{% endtrans %}</span>
            {% endif %}
            {% if object.isLocked() %}
                <span class="label label-warning">{% trans %}locked{% endtrans %}</span>
            {% endif %}
             {{ executeSymbbTemplateTopicEvent('topiclist.label', object) }}
            </div>
            <div class="subheader">{% trans %}Last post{% endtrans %}</div>
            <div class="lastpost">
                {% if object.getLastPost() %}
                    <a href="{{ path('symbb_forum_topic_show', {'id': object.getId(), 'name': object.getSeoName()}) }}?page=last#{{object.getLastPost().getSeoName()}}-{{object.getLastPost().getId()}}">
                        <div class="name">{{object.getLastPost().getName()}}</div>
                        <div class="user">{% trans with {'%user%': object.getLastPost().getAuthor().getUsername(), '%date%': object.getLastPost().getChanged()|format_date, '%time%': object.getLastPost().getChanged()|date('H:i')} %}by %user% on %date% at %time%{% endtrans %}</div>
                    </a>
                {% else %}
                    {% trans %}no Topics{% endtrans %}
                {% endif %}
            </div>
        </div>
    </div>

{% endmacro %}

